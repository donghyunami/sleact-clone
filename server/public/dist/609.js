(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[609],{9250:function(e,t,n){"use strict";var a=n(5692),l=n(8678),r=n(3046),o=n(3564),i=n(9669),s=n.n(i),c=n(7294),p=n(5977),d=n(9249),u=n(8100);t.Z=({show:e,onCloseModal:t,setShowInviteChannelModal:n})=>{const{workspace:i,channel:m}=(0,p.UO)(),[h,g,b]=(0,l.Z)(""),{data:x}=(0,u.ZP)("/api/users",o.Z),{mutate:f}=(0,u.ZP)(x?`/api/workspaces/${i}/channels/일반/members`:null,o.Z),k=(0,c.useCallback)((e=>{e.preventDefault(),h&&h.trim()&&s().post(`/api/workspaces/${i}/channels/${m}/members`,{email:h}).then((()=>{f(),n(!1),b("")})).catch((e=>{console.dir(e),d.Am.error(e.response?.data,{position:"bottom-center"})}))}),[m,h,f,b,n,i]);return c.createElement(a.Z,{show:e,onCloseModal:t},c.createElement("form",{onSubmit:k},c.createElement(r.__,{id:"member-label"},c.createElement("span",null,"채널 멤버 초대"),c.createElement(r.II,{id:"member",value:h,onChange:g})),c.createElement(r.zx,{type:"submit"},"초대하기")))}},4911:function(e,t,n){"use strict";n.d(t,{b:function(){return l},f:function(){return r}});var a=n(6482);const l=(0,a.Z)("div",{target:"eus8aqr1"})({name:"3nqusf",styles:"position:fixed;top:0;right:0;left:0;bottom:0;z-index:1000;&>div{position:absolute;display:inline-block;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0, 0, 0, 0.12);background-color:rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);border-radius:6px;user-select:none;min-width:360px;z-index:512;max-height:calc(100vh - 20px);color:rgb(29, 28, 29);}"}),r=(0,a.Z)("button",{target:"eus8aqr0"})({name:"19gmbxq",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer"})},5692:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(7294),l=n(4911),r=n(6482);const o=(0,r.Z)("div",{target:"e1q3ybao1"})({name:"10w7pu7",styles:"position:fixed;text-align:center;left:0;bottom:0;top:0;right:0;z-index:1022;&>div{margin-top:200px;display:inline-block;width:440px;background:white;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0, 0, 0, 0.12);background-color:rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);border-radius:6px;user-select:none;max-width:440px;padding:30px 40px 0;z-index:1012;position:relative;}"});(0,r.Z)("button",{target:"e1q3ybao0"})({name:"19gmbxq",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer"});var i=({show:e,children:t,onCloseModal:n})=>{const r=(0,a.useCallback)((e=>{e.stopPropagation()}),[]);return e?a.createElement(o,{onClick:n},a.createElement("div",{onClick:r},a.createElement(l.f,{onClick:n},"×"),t)):null}},2951:function(e,t,n){"use strict";var a=n(6809),l=n.n(a),r=n(7294);const o={};t.Z=e=>{const t=(0,r.useCallback)((()=>{e&&(o[e].disconnect(),delete o[e])}),[e]);return e?(o[e]||(o[e]=l().connect(`http://localhost:3095/ws-${e}`,{transports:["websocket"]})),[o[e],t]):[void 0,t]}},8228:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var a=n(7294),l=n(3727),r=n(5977),o=n(9669),i=n.n(o),s=n(8100),c=n(6182),p=n.n(c),d=n(3810),u=n(3564),m=n(6482);const h=(0,m.Z)("div",{target:"e1yu02113"})({name:"tjo4qw",styles:"float:right"}),g=(0,m.Z)("header",{target:"e1yu02112"})({name:"fvf0bi",styles:"height:38px;background:#350d36;color:#ffffff;box-shadow:0 1px 0 0 rgba(255, 255, 255, 0.1);padding:5px;text-align:center"}),b=(0,m.Z)("img",{target:"e1yu02111"})({name:"1ly4jlu",styles:"width:28px;height:28px;position:absolute;top:5px;right:16px"}),x=(0,m.Z)("div",{target:"e1yu02110"})({name:"47px7v",styles:"display:flex;padding:20px;& img{display:flex;}&>div{display:flex;flex-direction:column;margin-left:10px;}& #profile-name{font-weight:bold;display:inline-flex;}& #profile-active{font-size:13px;display:inline-flex;}"}),f=(0,m.Z)("button",{target:"e1yu0219"})({name:"bl1q1k",styles:"border:none;width:100%;border-top:1px solid rgb(29, 28, 29);background:transparent;display:block;height:33px;padding:5px 20px 5px;outline:none;cursor:pointer"}),k=(0,m.Z)("div",{target:"e1yu0218"})({name:"36bnqj",styles:"display:flex;flex:1"}),w=(0,m.Z)("div",{target:"e1yu0217"})({name:"17lvj7e",styles:"width:65px;display:inline-flex;flex-direction:column;align-items:center;background:#3f0e40;border-top:1px solid rgb(82, 38, 83);border-right:1px solid rgb(82, 38, 83);vertical-align:top;text-align:center;padding:15px 0 0"}),E=(0,m.Z)("nav",{target:"e1yu0216"})({name:"2pkygn",styles:"width:260px;display:inline-flex;flex-direction:column;background:#3f0e40;color:rgb(188, 171, 188);vertical-align:top;& a{padding-left:36px;color:inherit;text-decoration:none;height:28px;line-height:28px;display:flex;align-items:center;&.selected{color:white;}}& .bold{color:white;font-weight:bold;}& .count{margin-left:auto;background:#cd2553;border-radius:16px;display:inline-block;font-size:12px;font-weight:700;height:18px;line-height:18px;padding:0 9px;color:white;margin-right:16px;}& h2{height:36px;line-height:36px;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:15px;}"}),v=(0,m.Z)("button",{target:"e1yu0215"})({name:"1rmthq7",styles:"height:64px;line-height:64px;border:none;width:100%;text-align:left;border-top:1px solid rgb(82, 38, 83);border-bottom:1px solid rgb(82, 38, 83);font-weight:900;font-size:24px;background:transparent;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0;padding-left:16px;margin:0;color:white;cursor:pointer"}),y=(0,m.Z)("div",{target:"e1yu0214"})({name:"1146j5j",styles:"height:calc(100vh - 102px);overflow-y:auto"}),C=(0,m.Z)("div",{target:"e1yu0213"})({name:"192o1ir",styles:"padding:10px 0 0;& h2{padding-left:20px;}&>button{width:100%;height:28px;padding:4px;border:none;background:transparent;border-top:1px solid rgb(28, 29, 28);cursor:pointer;&:last-of-type{border-bottom:1px solid rgb(28, 29, 28);}}"}),Z=(0,m.Z)("div",{target:"e1yu0212"})({name:"82a6rk",styles:"flex:1"}),_=(0,m.Z)("button",{target:"e1yu0211"})({name:"9tlmej",styles:"color:white;font-size:24px;display:inline-block;width:40px;height:40px;background:transparent;border:none;cursor:pointer"}),M=(0,m.Z)("button",{target:"e1yu0210"})({name:"wsqixl",styles:"display:inline-block;width:40px;height:40px;border-radius:10px;background:white;border:3px solid #3f0e40;margin-bottom:15px;font-size:18px;font-weight:700;color:black;cursor:pointer"});var P=n(4911);const S=({children:e,style:t,show:n,onCloseModal:l,closeButton:r})=>{const o=(0,a.useCallback)((e=>{e.stopPropagation()}),[]);return n?a.createElement(P.b,{onClick:l},a.createElement("div",{style:t,onClick:o},r&&a.createElement(P.f,{onClick:l},"×"),e)):null};S.defaultProps={closeButton:!0};var I=S,q=n(3046),$=n(8678),z=n(5692),A=n(9249);n(5202);var j=({show:e,onCloseModal:t,setShowCreateChannelModal:n})=>{const[l,o,c]=(0,$.Z)(""),{workspace:p,channel:d}=(0,r.UO)(),{data:m}=(0,s.ZP)("/api/users",u.Z,{dedupingInterval:1e4}),{data:h,mutate:g}=(0,s.ZP)(m?`/api/workspaces/${p}/channels`:null,u.Z,{dedupingInterval:1e4});(0,a.useEffect)((()=>{A.Am.configure()}),[]);const b=(0,a.useCallback)((e=>{e.preventDefault(),console.log("채널 생성하기"),l&&l.trim()&&i().post(`/api/workspaces/${p}/channels`,{name:l},{withCredentials:!0}).then((()=>{n(!1),g(),c("")})).catch((e=>{A.Am.error(e.response?.data,{position:"bottom-center"}),console.dir(e)}))}),[l]);return a.createElement(z.Z,{show:e,onCloseModal:t},a.createElement("form",{onSubmit:b},a.createElement(q.__,{id:"workspace-label"},a.createElement("span",null,"채널"),a.createElement(q.II,{id:"wordspace",value:l,onChange:o})),a.createElement(q.zx,{type:"submit"},"생성하기")))},O=({show:e,onCloseModal:t,setShowInviteWorkspaceModal:n})=>{const{workspace:l}=(0,r.UO)(),[o,c,p]=(0,$.Z)(""),{data:d}=(0,s.ZP)("/api/users",u.Z),{mutate:m}=(0,s.ZP)(d?`/api/workspaces/${l}/members`:null,u.Z),h=(0,a.useCallback)((e=>{e.preventDefault(),o&&o.trim()&&i().post(`/api/workspaces/${l}/members`,{email:o},{withCredentials:!0}).then((({data:e})=>{m(e,!1),n(!1),p("")})).catch((e=>{console.dir(e),A.Am.error(e.response?.data,{position:"bottom-center"})}))}),[o,l,m,n,p]);return a.createElement(z.Z,{show:e,onCloseModal:t},a.createElement("form",{onSubmit:h},a.createElement(q.__,{id:"member-label"},a.createElement("span",null,"이메일"),a.createElement(q.II,{id:"member",type:"email",value:o,onChange:c})),a.createElement(q.zx,{type:"submit"},"초대하기")))},U=n(9250);const D=(0,m.Z)("button",{target:"e190xuym0"})("background:transparent;border:none;width:26px;height:26px;display:inline-flex;justify-content:center;align-items:center;color:white;margin-left:10px;cursor:pointer;",(({collapse:e})=>e&&"\n    & i {\n      transform: none;\n    }\n  "),";");var L=()=>{const{workspace:e}=(0,r.UO)(),{data:t,error:n,mutate:o}=(0,s.ZP)("/api/users",u.Z,{dedupingInterval:2e3}),{data:i}=(0,s.ZP)(t?`/api/workspaces/${e}/channels`:null,u.Z),[c,p]=(0,a.useState)(!1),d=(0,a.useCallback)((()=>{p((e=>!e))}),[]);return a.createElement(a.Fragment,null,a.createElement("h2",null,a.createElement(D,{collapse:c,onClick:d},a.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),a.createElement("span",null,"Channels")),a.createElement("div",null,!c&&i?.map((t=>a.createElement(l.OL,{key:t.name,activeClassName:"selected",to:`/workspace/${e}/channel/${t.name}`},a.createElement("span",null,"# ",t.name))))))},N=n(2951),W=()=>{const{workspace:e}=(0,r.UO)(),{data:t,error:n,mutate:o}=(0,s.ZP)("/api/users",u.Z,{dedupingInterval:2e3}),{data:i}=(0,s.ZP)(t?`/api/workspaces/${e}/members`:null,u.Z),[c]=(0,N.Z)(e),[p,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),g=(0,a.useCallback)((()=>{d((e=>!e))}),[]);return(0,a.useEffect)((()=>{console.log("DMList: workspace 바꼈다",e),h([])}),[e]),(0,a.useEffect)((()=>(c?.on("onlineList",(e=>{h(e)})),()=>{c?.off("onlineList")})),[c]),a.createElement(a.Fragment,null,a.createElement("h2",null,a.createElement(D,{collapse:p,onClick:g},a.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),a.createElement("span",null,"Direct Messages")),a.createElement("div",null,!p&&i?.map((n=>{const r=m.includes(n.id);return a.createElement(l.OL,{key:n.id,activeClassName:"selected",to:`/workspace/${e}/dm/${n.id}`},a.createElement("i",{className:"c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence "+(r?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"),"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),a.createElement("span",null,n.nickname),n.id===t?.id&&a.createElement("span",null,"(나)"))}))))};const B=(0,d.ZP)((()=>Promise.all([n.e(18),n.e(410),n.e(808)]).then(n.bind(n,808)))),F=(0,d.ZP)((()=>Promise.all([n.e(18),n.e(410),n.e(94)]).then(n.bind(n,3094))));var G=()=>{const[e,t]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[m,P]=(0,a.useState)(!1),[S,D]=(0,a.useState)(!1),[G,H]=(0,a.useState)(!1),[J,K,Q]=(0,$.Z)(""),[R,T,V]=(0,$.Z)(""),{workspace:X,channel:Y}=(0,r.UO)(),{data:ee,error:te,mutate:ne}=(0,s.ZP)("/api/users",u.Z,{dedupingInterval:1e4}),{data:ae}=(0,s.ZP)(ee?`/api/workspaces/${X}/channels`:null,u.Z),{data:le}=(0,s.ZP)(ee?`/api/workspaces/${X}/members`:null,u.Z),[re,oe]=(0,N.Z)(X);(0,a.useEffect)((()=>{A.Am.configure()}),[]),(0,a.useEffect)((()=>{ae&&ee&&re&&(console.log("socket",re),re.emit("login",{id:ee.id,channels:ae.map((e=>e.id))}))}),[ae,ee]),(0,a.useEffect)((()=>()=>{oe()}),[X,oe]);const ie=(0,a.useCallback)((()=>{i().post("/api/users/logout",null,{withCredentials:!0}).then((()=>{ne(!1,!1)}))}),[]),se=(0,a.useCallback)((e=>{e.stopPropagation(),t(!1)}),[]),ce=(0,a.useCallback)((e=>{e.stopPropagation(),t((e=>!e))}),[]),pe=(0,a.useCallback)((e=>{o(!0)}),[]),de=(0,a.useCallback)((e=>{e.preventDefault(),J&&J.trim()&&R&&R.trim()?i().post("/api/workspaces",{workspace:J,url:R},{withCredentials:!0}).then((()=>{ne(),o(!1),Q(""),V("")})).catch((e=>{console.dir(e.response.data),A.Am.error(e.response?.data,{position:"bottom-center"})})):alert("워크스페이 이름 또는 url를 입력해주세요!")}),[J,R]),ue=(0,a.useCallback)((()=>{o(!1),H(!1),d(!1),D(!1),Q(""),V("")}),[]),me=(0,a.useCallback)((()=>{P((e=>!e))}),[]),he=(0,a.useCallback)((()=>{H(!0)}),[]),ge=(0,a.useCallback)((()=>{d(!0)}),[]);return void 0===ee?a.createElement("div",null,"로딩중..."):ee?a.createElement("div",null,ee&&a.createElement(g,null,a.createElement(h,null,a.createElement("span",{onClick:ce},a.createElement(b,{src:p().url(ee.email,{s:"28px",d:"retro"}),alt:ee.nickname}),e&&a.createElement(I,{style:{right:0,top:38},show:e,onCloseModal:se},a.createElement(x,null,a.createElement("img",{src:p().url(ee.email,{s:"36px",d:"retro"}),alt:ee.nickname}),a.createElement("div",null,a.createElement("span",{id:"profile-name"},ee.nickname),a.createElement("span",{id:"profile-active"},"Active"))),a.createElement(f,{onClick:ie},"로그아웃"))))),ee&&a.createElement(k,null,a.createElement(w,null,ee?.Workspaces?.map((e=>a.createElement(l.rU,{key:e.id,to:`/workspace/${e.url}/channel/일반`},a.createElement(M,null,e.name.slice(0,1).toUpperCase())))),a.createElement(_,{onClick:pe},"+")),a.createElement(E,null,a.createElement(v,{onClick:me},"Select"),a.createElement(y,null,a.createElement(I,{show:m,onCloseModal:me,style:{top:95,left:80}},a.createElement(C,null,a.createElement("h2",null,"Sleact"),a.createElement("button",{onClick:ge},"워크스페이스에 사용자 초대"),a.createElement("button",{onClick:he},"채널만들기"),a.createElement("button",{onClick:ie},"로그아웃"))),a.createElement(L,null),a.createElement(W,null))),a.createElement(Z,null,a.createElement(r.rs,null,a.createElement(r.AW,{path:"/workspace/:workspace/channel/:channel",component:B}),a.createElement(r.AW,{path:"/workspace/:workspace/dm/:id",component:F})))),a.createElement(z.Z,{show:n,onCloseModal:ue},a.createElement("form",{onSubmit:de},a.createElement(q.__,{id:"workspace-label"},a.createElement("span",null,"워크스페이스 이름"),a.createElement(q.II,{id:"wordspace",value:J,onChange:K})),a.createElement(q.__,{id:"workspace-url-label"},a.createElement("span",null,"워크스페이스 url"),a.createElement(q.II,{id:"wordspace",value:R,onChange:T})),a.createElement(q.zx,{type:"submit"},"생성하기"))),a.createElement(j,{show:G,onCloseModal:ue,setShowCreateChannelModal:H}),a.createElement(O,{show:c,onCloseModal:ue,setShowInviteWorkspaceModal:d}),a.createElement(U.Z,{show:S,onCloseModal:ue,setShowInviteChannelModal:D})):a.createElement(r.l_,{to:"/login"})}},7020:function(){}}]);