{"version":3,"file":"319.js","mappings":"2NAuJA,UApIe,KACb,MAAM,KAAEA,EAAF,MAAQC,EAAR,OAAeC,IAAWC,EAAAA,EAAAA,IAAO,aAAcC,EAAAA,EAAS,CAC5DC,iBAAkB,OAGbC,EAAOC,IAAiBC,EAAAA,EAAAA,GAAS,KACjCC,EAAUC,EAAkBC,IAAeH,EAAAA,EAAAA,GAAS,KACpDI,EAAD,CAAaC,IAAeL,EAAAA,EAAAA,GAAS,KACpCM,EAAD,CAAkBC,IAAoBP,EAAAA,EAAAA,GAAS,KAC9CQ,EAAeC,IAAoBC,EAAAA,EAAAA,WAAS,IAC5CC,EAAeC,IAAoBF,EAAAA,EAAAA,WAAS,IAC5CG,EAAaC,IAAkBJ,EAAAA,EAAAA,UAAS,IAEzCK,GAAmBC,EAAAA,EAAAA,cAAaC,IACpCZ,EAAYY,EAAEC,OAAOC,OACrBV,EAAiBH,IAAkBW,EAAEC,OAAOC,SAC3C,IAEGC,GAAwBJ,EAAAA,EAAAA,cAC3BC,IACCV,EAAiBU,EAAEC,OAAOC,OAC1BV,EAAiBL,IAAaa,EAAEC,OAAOC,SAEzC,CAACf,EAAUG,IAEPc,GAAWL,EAAAA,EAAAA,cACdC,IACCA,EAAEK,iBAEGd,IACHe,QAAQC,IAAI,cACZZ,GAAiB,GACjBE,EAAe,IACfW,IAAAA,KACQ,aAAc,CAClB3B,QACAG,WACAG,aAEDsB,MAAMC,IACLJ,QAAQC,IAAIG,GACZf,GAAiB,MAElBgB,OAAOnC,IACN8B,QAAQ9B,MAAMA,EAAMoC,SAASrC,MAC7BsB,EAAerB,EAAMoC,SAASrC,SAE/BsC,SAAQ,YAGf,CAAChC,EAAOG,EAAUG,EAAUI,IAI9B,YAAauB,IAATvC,EACK,qCAILA,EACK,gBAAC,KAAD,CAAUwC,GAAG,iCAIpB,uBAAKC,GAAG,aACN,gBAAC,KAAD,eACA,gBAAC,KAAD,CAAMZ,SAAUA,GACd,gBAAC,KAAD,CAAOY,GAAG,eACR,sCACA,2BACE,gBAAC,KAAD,CACEC,KAAK,QACLD,GAAG,QACHE,KAAK,QACLhB,MAAOrB,EACPsC,SAAUrC,KAEVD,GAAS,gBAAC,KAAD,uBAGf,gBAAC,KAAD,CAAOmC,GAAG,kBACR,mCACA,2BACE,gBAAC,KAAD,CACEC,KAAK,OACLD,GAAG,WACHE,KAAK,WACLhB,MAAOlB,EACPmC,SAAUlC,KAEVD,GAAY,gBAAC,KAAD,uBAGlB,gBAAC,KAAD,CAAOgC,GAAG,kBACR,oCACA,2BACE,gBAAC,KAAD,CACEC,KAAK,WACLD,GAAG,WACHE,KAAK,WACLhB,MAAOf,EACPgC,SAAUrB,MAIhB,gBAAC,KAAD,CAAOkB,GAAG,wBACR,uCACA,2BACE,gBAAC,KAAD,CACEC,KAAK,WACLD,GAAG,iBACHE,KAAK,iBACLhB,MAAOb,EACP8B,SAAUhB,KAGbZ,GAAiB,gBAAC,KAAD,yBACjBK,GAAe,gBAAC,KAAD,uBACfF,GACC,gBAAC,KAAD,6BAGJ,gBAAC,KAAD,CAAQuB,KAAK,UAAb,SAEF,gBAAC,KAAD,mBAEE,gBAAC,KAAD,CAAMF,GAAG,UAAT","sources":["webpack://sleact-ts-front/./pages/SignUp/index.tsx"],"sourcesContent":["import useInput from '@hooks/useInput';\r\nimport React, { useCallback, useState } from 'react';\r\n\r\nimport {\r\n  Header,\r\n  Form,\r\n  Input,\r\n  Label,\r\n  Button,\r\n  LinkContainer,\r\n  Error,\r\n  Success,\r\n} from './styles';\r\n\r\nimport axios from 'axios';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport useSWR from 'swr';\r\nimport fetcher from '@utils/fetcher';\r\n\r\nconst SignUp = () => {\r\n  const { data, error, mutate } = useSWR('/api/users', fetcher, {\r\n    dedupingInterval: 10000,\r\n  });\r\n\r\n  const [email, onChangeEmail] = useInput('');\r\n  const [nickname, onChangeNickname, setNickName] = useInput('');\r\n  const [password, , setPassword] = useInput('');\r\n  const [passwordCheck, , setPasswordCheck] = useInput('');\r\n  const [mismatchError, setMismatchError] = useState(false);\r\n  const [signUpSuccess, setSignUpSuccess] = useState(false);\r\n  const [signUpError, setSignUpError] = useState('');\r\n\r\n  const onChangePassword = useCallback((e) => {\r\n    setPassword(e.target.value);\r\n    setMismatchError(passwordCheck !== e.target.value);\r\n  }, []);\r\n\r\n  const onChangePasswordCheck = useCallback(\r\n    (e) => {\r\n      setPasswordCheck(e.target.value);\r\n      setMismatchError(password !== e.target.value);\r\n    },\r\n    [password, setPasswordCheck],\r\n  );\r\n  const onSubmit = useCallback(\r\n    (e) => {\r\n      e.preventDefault();\r\n      // 비밀번호 일치하는 지 체크\r\n      if (!mismatchError) {\r\n        console.log('서버로 회원가입하기');\r\n        setSignUpSuccess(false);\r\n        setSignUpError('');\r\n        axios\r\n          .post('/api/users', {\r\n            email,\r\n            nickname,\r\n            password,\r\n          })\r\n          .then((res) => {\r\n            console.log(res);\r\n            setSignUpSuccess(true);\r\n          })\r\n          .catch((error) => {\r\n            console.error(error.response.data);\r\n            setSignUpError(error.response.data);\r\n          })\r\n          .finally(() => {}); // 실패하든 성공하든 상관없이 실행\r\n      }\r\n    },\r\n    [email, nickname, password, mismatchError],\r\n  );\r\n\r\n  // 로딩중 처리\r\n  if (data === undefined) {\r\n    return <div>로딩중...</div>;\r\n  }\r\n\r\n  // 로그인이 된 상황\r\n  if (data) {\r\n    return <Redirect to=\"/workspace/sleact/channel/일반\" />;\r\n  }\r\n\r\n  return (\r\n    <div id=\"container\">\r\n      <Header>Sleact</Header>\r\n      <Form onSubmit={onSubmit}>\r\n        <Label id=\"email-label\">\r\n          <span>이메일 주소</span>\r\n          <div>\r\n            <Input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              value={email}\r\n              onChange={onChangeEmail}\r\n            />\r\n            {!email && <Error>이메일을 입력해주세요.</Error>}\r\n          </div>\r\n        </Label>\r\n        <Label id=\"nickname-label\">\r\n          <span>닉네임</span>\r\n          <div>\r\n            <Input\r\n              type=\"text\"\r\n              id=\"nickname\"\r\n              name=\"nickname\"\r\n              value={nickname}\r\n              onChange={onChangeNickname}\r\n            />\r\n            {!nickname && <Error>닉네임을 입력해주세요.</Error>}\r\n          </div>\r\n        </Label>\r\n        <Label id=\"password-label\">\r\n          <span>비밀번호</span>\r\n          <div>\r\n            <Input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              value={password}\r\n              onChange={onChangePassword}\r\n            />\r\n          </div>\r\n        </Label>\r\n        <Label id=\"password-check-label\">\r\n          <span>비밀번호 확인</span>\r\n          <div>\r\n            <Input\r\n              type=\"password\"\r\n              id=\"password-check\"\r\n              name=\"password-check\"\r\n              value={passwordCheck}\r\n              onChange={onChangePasswordCheck}\r\n            />\r\n          </div>\r\n          {mismatchError && <Error>비밀번호가 일치하지 않습니다.</Error>}\r\n          {signUpError && <Error>이미 사용중인 계정입니다.</Error>}\r\n          {signUpSuccess && (\r\n            <Success>회원가입되었습니다! 로그인해주세요.</Success>\r\n          )}\r\n        </Label>\r\n        <Button type=\"submit\">회원가입</Button>\r\n      </Form>\r\n      <LinkContainer>\r\n        이미 회원이신가요?&nbsp;\r\n        <Link to=\"/login\">로그인 하러가기</Link>\r\n      </LinkContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n"],"names":["data","error","mutate","useSWR","fetcher","dedupingInterval","email","onChangeEmail","useInput","nickname","onChangeNickname","setNickName","password","setPassword","passwordCheck","setPasswordCheck","mismatchError","setMismatchError","useState","signUpSuccess","setSignUpSuccess","signUpError","setSignUpError","onChangePassword","useCallback","e","target","value","onChangePasswordCheck","onSubmit","preventDefault","console","log","axios","then","res","catch","response","finally","undefined","to","id","type","name","onChange"],"sourceRoot":""}